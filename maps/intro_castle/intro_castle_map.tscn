[gd_scene load_steps=18 format=3 uid="uid://om1fi1opyx1m"]

[ext_resource type="TileSet" uid="uid://8161klnmo4uv" path="res://tilesets/dark_dimension_tileset/dark_dimension_modified_tileset.tres" id="2_cgrkn"]
[ext_resource type="PackedScene" uid="uid://ddqssg6qko7t7" path="res://player/player.tscn" id="3_b7610"]
[ext_resource type="Script" path="res://util/components/health/health_component.gd" id="4_nul3n"]
[ext_resource type="Script" path="res://util/components/mana/mana_component.gd" id="5_axc0v"]
[ext_resource type="PackedScene" uid="uid://bj5op0cwjscwv" path="res://maps/intro_castle/lore/intro_castle_lore_manager.tscn" id="6_bsn1n"]
[ext_resource type="PackedScene" uid="uid://cyrdo4s5yatf8" path="res://npcs/dialog_npc/dialog_npc.tscn" id="7_ysuuh"]
[ext_resource type="Script" path="res://ui/dialog/dialog_resource.gd" id="9_3npla"]
[ext_resource type="PackedScene" uid="uid://bitufy53rv88t" path="res://npcs/wizard/wizard_npc_sprite.tscn" id="9_e1vf3"]
[ext_resource type="PackedScene" uid="uid://bwjgthkomaj78" path="res://util/teleporter/teleporter.tscn" id="9_pdddj"]
[ext_resource type="PackedScene" uid="uid://cst0mrjfn4dew" path="res://npcs/emmy/emmy_npc_sprite.tscn" id="12_esega"]
[ext_resource type="PackedScene" uid="uid://du0klnaq2v87k" path="res://npcs/queen_croix/queen_croix_npc_sprite.tscn" id="12_p3al2"]
[ext_resource type="PackedScene" uid="uid://dhdg4yr1tqism" path="res://util/teleporter/teleporter_destination.tscn" id="13_pcxws"]
[ext_resource type="PackedScene" uid="uid://b72jukylx6o6m" path="res://maps/intro_castle/lore/emmy_castle_room_lore_manager.tscn" id="13_syyx6"]

[sub_resource type="NavigationPolygon" id="NavigationPolygon_7fm1p"]
vertices = PackedVector2Array(254, 131, -111, 131, -110, 99, 19, 100, 125, 101, 17, 2, 125, 2, 254, 100)
polygons = Array[PackedInt32Array]([PackedInt32Array(0, 1, 2, 3, 4), PackedInt32Array(3, 5, 6, 4), PackedInt32Array(0, 4, 7)])
outlines = Array[PackedVector2Array]([PackedVector2Array(17, 2, 125, 2, 125, 101, 254, 100, 254, 131, -111, 131, -110, 99, 19, 100)])

[sub_resource type="Resource" id="Resource_sur25"]
script = ExtResource("4_nul3n")
_health = 8

[sub_resource type="Resource" id="Resource_2bgqq"]
script = ExtResource("5_axc0v")
_mana_amount = 4

[sub_resource type="Resource" id="Resource_lusp1"]
script = ExtResource("9_3npla")
author = "Royal Guard Captain"
dialog = Array[String](["Well? Don't stay here, go through the door!"])

[node name="IntroCastleMap" type="Node2D"]
y_sort_enabled = true

[node name="TileMap" type="TileMap" parent="."]
tile_set = ExtResource("2_cgrkn")
format = 2
layer_0/name = "Floor"
layer_0/z_index = -1
layer_0/tile_data = PackedInt32Array(1, 458756, 10, 2, 458756, 10, 3, 458756, 10, 4, 458756, 10, 65539, 458756, 10, 65538, 458756, 10, 65537, 458756, 10, 65540, 458756, 10, 65541, 458756, 10, 5, 458756, 10, 6, 458756, 10, 7, 458756, 10, 65543, 458756, 10, 65542, 458756, 10, 131073, 458756, 10, 196610, 458756, 10, 262146, 458756, 10, 262145, 458756, 10, 327681, 458756, 10, 196609, 458756, 10, 131074, 458756, 10, 131075, 458756, 10, 131076, 458756, 10, 131077, 458756, 10, 131078, 458756, 10, 131079, 458756, 10, 196615, 458756, 10, 262151, 458756, 10, 327687, 458756, 10, 327686, 458756, 10, 327685, 458756, 10, 327684, 458756, 10, 327683, 458756, 10, 327682, 458756, 10, 262147, 458756, 10, 196611, 458756, 10, 196612, 458756, 10, 196613, 458756, 10, 262149, 458756, 10, 262150, 458756, 10, 262148, 458756, 10, 196614, 458756, 10, 458745, 458756, 10, 524281, 458756, 10, 589817, 458756, 10, 589818, 458756, 10, 524282, 458756, 10, 458746, 458756, 10, 458747, 458756, 10, 458748, 458756, 10, 524284, 458756, 10, 524283, 458756, 10, 589819, 458756, 10, 589820, 458756, 10, 589821, 458756, 10, 524285, 458756, 10, 524286, 458756, 10, 458749, 458756, 10, 458750, 458756, 10, 458751, 458756, 10, 393216, 458756, 10, 393217, 458756, 10, 458753, 458756, 10, 458754, 458756, 10, 458755, 458756, 10, 458756, 458756, 10, 458757, 458756, 10, 458758, 458756, 10, 393222, 458756, 10, 393223, 458756, 10, 393224, 458756, 10, 393221, 458756, 10, 393220, 458756, 10, 393219, 458756, 10, 393218, 458756, 10, 458752, 458756, 10, 524287, 458756, 10, 589822, 458756, 10, 589823, 458756, 10, 524288, 458756, 10, 524289, 458756, 10, 524290, 458756, 10, 524292, 458756, 10, 524291, 458756, 10, 524293, 458756, 10, 524294, 458756, 10, 524295, 458756, 10, 524296, 458756, 10, 458761, 458756, 10, 458760, 458756, 10, 458759, 458756, 10, 393225, 458756, 10, 393226, 458756, 10, 393227, 458756, 10, 393228, 458756, 10, 393229, 458756, 10, 393230, 458756, 10, 393231, 458756, 10, 458767, 458756, 10, 458766, 458756, 10, 458765, 458756, 10, 458764, 458756, 10, 458763, 458756, 10, 458762, 458756, 10, 524298, 458756, 10, 524297, 458756, 10, 524299, 458756, 10, 524300, 458756, 10, 524301, 458756, 10, 524302, 458756, 10, 524303, 458756, 10, -65532, 458756, 10, -65533, 458756, 10, -65531, 458756, 10, 53, 458756, 10, 54, 458756, 10, 55, 458756, 10, 56, 458756, 10, 57, 458756, 10, 58, 458756, 10, 59, 458756, 10, 60, 458756, 10, 61, 458756, 10, 62, 458756, 10, 63, 458756, 10, 64, 458756, 10, 65589, 458756, 10, 131125, 458756, 10, 196661, 458756, 10, 196662, 458756, 10, 196663, 458756, 10, 262197, 458756, 10, 262198, 458756, 10, 262199, 458756, 10, 131126, 458756, 10, 65590, 458756, 10, 65591, 458756, 10, 131127, 458756, 10, 131128, 458756, 10, 65592, 458756, 10, 65593, 458756, 10, 65594, 458756, 10, 65595, 458756, 10, 65596, 458756, 10, 65597, 458756, 10, 65598, 458756, 10, 65599, 458756, 10, 65600, 458756, 10, 131136, 458756, 10, 196672, 458756, 10, 131135, 458756, 10, 131134, 458756, 10, 196669, 458756, 10, 196668, 458756, 10, 196667, 458756, 10, 131130, 458756, 10, 131129, 458756, 10, 196664, 458756, 10, 196665, 458756, 10, 196666, 458756, 10, 131131, 458756, 10, 131132, 458756, 10, 131133, 458756, 10, 196671, 458756, 10, 262208, 458756, 10, 262207, 458756, 10, 262206, 458756, 10, 262205, 458756, 10, 196670, 458756, 10, 262203, 458756, 10, 262202, 458756, 10, 262201, 458756, 10, 262200, 458756, 10, 262204, 458756, 10, -65482, 458756, 10, -65481, 458756, 10, -65480, 458756, 10, 65487, 458756, 10, 65488, 458756, 10, 65489, 458756, 10, 65490, 458756, 10, 65491, 458756, 10, 65492, 458756, 10, 65493, 458756, 10, 131029, 458756, 10, 196565, 458756, 10, 196564, 458756, 10, 196563, 458756, 10, 131027, 458756, 10, 131026, 458756, 10, 131025, 458756, 10, 131024, 458756, 10, 131023, 458756, 10, 196559, 458756, 10, 196560, 458756, 10, 196561, 458756, 10, 196562, 458756, 10, 131028, 458756, 10, 262100, 458756, 10, 262099, 458756, 10, 262098, 458756, 10, 262097, 458756, 10, 262096, 458756, 10, 262095, 458756, 10, 262101, 458756, 10, 65494, 458756, 10, 131030, 458756, 10, 196566, 458756, 10, 262102, 458756, 10, 327631, 458756, 10, 327632, 458756, 10, 327633, 458756, 10, 327634, 458756, 10, 327635, 458756, 10, 327638, 458756, 10, 327637, 458756, 10, 327636, 458756, 10, 393211, 458756, 10, 393210, 458756, 10, 393212, 458756, 10)
layer_1/name = "BackgroundWall"
layer_1/enabled = true
layer_1/modulate = Color(1, 1, 1, 1)
layer_1/y_sort_enabled = false
layer_1/y_sort_origin = 0
layer_1/z_index = -1
layer_1/tile_data = PackedInt32Array(-65534, 1769476, 20, -131070, 1769476, 20, -131071, 1769476, 20, -196607, 1769476, 20, -196606, 1769476, 20, -65535, 1769476, 20, -196602, 1769476, 20, -196601, 1769476, 20, -131065, 1769476, 20, -65530, 1769476, 20, -131066, 1769476, 20, -65529, 1769476, 20, -262143, 1310724, 18, -262142, 1310724, 18, -262141, 1310724, 18, -262140, 1310724, 18, -262139, 1310724, 18, -262138, 1310724, 18, -262137, 1310724, 18, -262136, 1376260, 18, -262144, 1245188, 18, -196608, 1245188, 19, -131072, 1245188, 19, -65536, 1245188, 19, 0, 1245188, 19, 65536, 1245188, 19, 131072, 1441796, 19, 196608, 1769476, 20, 262144, 1769476, 20, -196600, 1376260, 19, -131064, 1376260, 19, -65528, 1376260, 19, 8, 1376260, 19, 65544, 1376260, 19, 131080, 1507332, 19, 196616, 1769476, 20, 262152, 1769476, 20, 393209, 1769476, 20, 327673, 1769476, 20, 262137, 1769476, 20, 262138, 1245188, 14, 262139, 1310724, 14, 262140, 1376260, 14, 262141, 1769476, 20, 262142, 1769476, 20, 262143, 1769476, 20, 327680, 1769476, 20, 393215, 1769476, 20, 393214, 1769476, 20, 327678, 1769476, 20, 327679, 1769476, 20, 327677, 1769476, 20, 327676, 1376260, 15, 327675, 1310724, 15, 327674, 1245188, 15, 393210, 1245188, 16, 393211, 1310724, 16, 393212, 1376260, 16, 393213, 1769476, 20, 196617, 1769476, 20, 196618, 1769476, 20, 196619, 1769476, 20, 196620, 1769476, 20, 196621, 1769476, 20, 196622, 1769476, 20, 196623, 1769476, 20, 262159, 1769476, 20, 327695, 1769476, 20, 327694, 1769476, 20, 327693, 1769476, 20, 327692, 1769476, 20, 327691, 1769476, 20, 327690, 1769476, 20, 327689, 1769476, 20, 262153, 1769476, 20, 327688, 1769476, 20, 262154, 1769476, 20, 262155, 1769476, 20, 262156, 1769476, 20, 262157, 1769476, 20, 262158, 1769476, 20, 196601, 1310724, 18, 196602, 1310724, 18, 196603, 1310724, 18, 196604, 1310724, 18, 196605, 1310724, 18, 196606, 1310724, 18, 196607, 1310724, 18, 131081, 1310724, 18, 131082, 1310724, 18, 131083, 1310724, 18, 131084, 1310724, 18, 131085, 1310724, 18, 131086, 1310724, 18, 131087, 1310724, 18, -196605, 1245188, 5, -196604, 1310724, 5, -196603, 1376260, 5, -131069, 1245188, 6, -131068, 1310724, 6, -131067, 1376260, 6, -65533, 1245188, 7, -65532, 1310724, 7, -65531, 1376260, 7, -196547, 1769476, 20, -131014, 1769476, 20, -131013, 1769476, 20, -131012, 1769476, 20, -131011, 1769476, 20, -65478, 1769476, 20, -65477, 1769476, 20, -65476, 1769476, 20, -65475, 1769476, 20, -65474, 1769476, 20, -131010, 1769476, 20, -196546, 1769476, 20, -196545, 1769476, 20, -196544, 1769476, 20, -131008, 1769476, 20, -131009, 1769476, 20, -65473, 1769476, 20, -65472, 1769476, 20, -262086, 1310724, 18, -262085, 1310724, 18, -262084, 1310724, 18, -262083, 1310724, 18, -262082, 1310724, 18, -262081, 1310724, 18, -262080, 1310724, 18, -262079, 1376260, 18, -196543, 1376260, 19, -131007, 1376260, 19, -65471, 1376260, 19, 65, 1376260, 19, 65601, 1376260, 19, 131137, 1376260, 19, 196673, 1376260, 19, 196660, 1245188, 19, 131124, 1245188, 19, 65588, 1245188, 19, 52, 1245188, 19, -65484, 1245188, 19, -131020, 1245188, 19, -262087, 1310724, 18, -262088, 1310724, 18, -262089, 1310724, 18, -262090, 1310724, 18, -262091, 1310724, 18, -262092, 1245188, 18, -196556, 1245188, 19, -196553, 1310724, 14, -196554, 1245188, 14, -196555, 1769476, 20, -131019, 1769476, 20, -65483, 1769476, 20, -65482, 1245188, 16, -65481, 1310724, 16, -131017, 1310724, 15, -131018, 1245188, 15, -131016, 1376260, 15, -196552, 1376260, 14, -196551, 1769476, 20, -131015, 1769476, 20, -65479, 1769476, 20, -65480, 1376260, 16, 196624, 1376260, 19, 262160, 1376260, 19, 327696, 1376260, 19, 393232, 1376260, 19, 458768, 1376260, 19, 524304, 1376260, 19, 262136, 1245188, 19, 327672, 1245188, 19, 393208, 1245188, 19, 458744, 1245188, 19, 524280, 1245188, 19, 196600, 1245188, 18, 131088, 1376260, 18, -45, 1769476, 20, -65581, 1769476, 20, -131117, 1769476, 20, -131116, 1769476, 20, -131115, 1769476, 20, -131114, 1769476, 20, -65578, 1769476, 20, -65579, 1769476, 20, -65580, 1769476, 20, -44, 1769476, 20, -43, 1769476, 20, -42, 1769476, 20, -65582, 1769476, 20, -131118, 1769476, 20, -131119, 1769476, 20, -131120, 1769476, 20, -131121, 1769476, 20, -65585, 1769476, 20, -49, 1769476, 20, -48, 1769476, 20, -47, 1769476, 20, -65583, 1769476, 20, -65584, 1769476, 20, -46, 1769476, 20, -196657, 1310724, 18, -196656, 1310724, 18, -196655, 1310724, 18, -196654, 1310724, 18, -196653, 1310724, 18, -196652, 1310724, 18, -196651, 1310724, 18, -196650, 1310724, 18, -196649, 1376260, 18, -131113, 1376260, 19, -65577, 1376260, 19, -41, 1376260, 19, 65495, 1376260, 19, 131031, 1376260, 19, 196567, 1376260, 19, 262103, 1376260, 19, -196658, 1245188, 18, -131122, 1245188, 19, -65586, 1245188, 19, -50, 1245188, 19, 65486, 1245188, 19, 131022, 1245188, 19, 196558, 1245188, 19, 262094, 1245188, 19, -196550, 1769476, 20, -196549, 1769476, 20, -196548, 1769476, 20)
layer_2/name = "FrontWall"
layer_2/enabled = true
layer_2/modulate = Color(1, 1, 1, 1)
layer_2/y_sort_enabled = false
layer_2/y_sort_origin = 0
layer_2/z_index = -1
layer_2/tile_data = PackedInt32Array(589817, 1310724, 18, 589818, 1310724, 18, 589819, 1310724, 18, 589820, 1310724, 18, 589821, 1310724, 18, 589822, 1310724, 18, 589823, 1310724, 18, 524288, 1310724, 18, 524289, 1310724, 18, 524290, 1310724, 18, 524291, 1310724, 18, 524292, 1310724, 18, 524293, 1310724, 18, 524294, 1310724, 18, 524295, 1310724, 18, 524296, 1310724, 18, 524297, 1310724, 18, 524298, 1310724, 18, 524299, 1310724, 18, 524300, 1310724, 18, 524301, 1310724, 18, 524302, 1310724, 18, 524303, 1310724, 18, 655353, 1769476, 20, 655354, 1769476, 20, 655355, 1769476, 20, 655356, 1769476, 20, 655357, 1769476, 20, 655358, 1769476, 20, 655359, 1769476, 20, 589824, 1769476, 20, 589825, 1769476, 20, 589826, 1769476, 20, 589827, 1769476, 20, 589828, 1769476, 20, 589829, 1769476, 20, 589830, 1769476, 20, 589831, 1769476, 20, 589832, 1769476, 20, 589833, 1769476, 20, 589834, 1769476, 20, 589835, 1769476, 20, 589836, 1769476, 20, 589837, 1769476, 20, 589838, 1769476, 20, 589839, 1769476, 20, 786425, 1769476, 20, 720889, 1769476, 20, 720890, 1769476, 20, 720891, 1769476, 20, 786426, 1769476, 20, 786427, 1769476, 20, 786428, 1769476, 20, 786429, 1769476, 20, 786430, 1769476, 20, 786431, 1769476, 20, 720896, 1769476, 20, 720897, 1769476, 20, 720898, 1769476, 20, 720899, 1769476, 20, 720900, 1769476, 20, 720901, 1769476, 20, 720902, 1769476, 20, 720903, 1769476, 20, 720904, 1769476, 20, 720892, 1769476, 20, 720893, 1769476, 20, 720894, 1769476, 20, 720895, 1769476, 20, 655360, 1769476, 20, 655361, 1769476, 20, 655362, 1769476, 20, 655363, 1769476, 20, 655364, 1769476, 20, 655365, 1769476, 20, 655366, 1769476, 20, 655367, 1769476, 20, 655368, 1769476, 20, 655369, 1769476, 20, 655370, 1769476, 20, 655371, 1769476, 20, 655372, 1769476, 20, 655373, 1769476, 20, 655374, 1769476, 20, 655375, 1769476, 20, 720910, 1769476, 20, 720909, 1769476, 20, 720908, 1769476, 20, 720907, 1769476, 20, 720906, 1769476, 20, 720905, 1769476, 20, 720911, 1769476, 20, 262208, 1310724, 18, 262207, 1310724, 18, 262206, 1310724, 18, 262205, 1310724, 18, 262204, 1310724, 18, 262203, 1310724, 18, 262202, 1310724, 18, 262201, 1310724, 18, 262200, 1310724, 18, 262199, 1310724, 18, 262198, 1310724, 18, 262197, 1310724, 18, 327733, 1769476, 20, 327734, 1769476, 20, 327735, 1769476, 20, 327736, 1769476, 20, 327737, 1769476, 20, 327738, 1769476, 20, 327739, 1769476, 20, 327740, 1769476, 20, 327741, 1769476, 20, 327742, 1769476, 20, 327743, 1769476, 20, 327744, 1769476, 20, 393280, 1769476, 20, 393279, 1769476, 20, 393278, 1769476, 20, 393277, 1769476, 20, 393276, 1769476, 20, 393275, 1769476, 20, 393274, 1769476, 20, 393273, 1769476, 20, 393272, 1769476, 20, 393271, 1769476, 20, 393270, 1769476, 20, 393269, 1769476, 20, 458805, 1769476, 20, 458806, 1769476, 20, 458811, 1769476, 20, 458810, 1769476, 20, 458809, 1769476, 20, 458808, 1769476, 20, 458807, 1769476, 20, 458816, 1769476, 20, 458815, 1769476, 20, 458814, 1769476, 20, 458813, 1769476, 20, 458812, 1769476, 20, 589840, 1835012, 20, 655376, 1835012, 20, 720912, 1835012, 20, 655352, 1703940, 20, 720888, 1703940, 20, 786424, 1703940, 20, 589816, 1245188, 20, 327732, 1703940, 20, 393268, 1703940, 20, 458804, 1703940, 20, 327745, 1835012, 20, 393281, 1835012, 20, 458817, 1835012, 20, 327631, 1310724, 20, 327632, 1310724, 20, 327633, 1310724, 20, 327634, 1310724, 20, 327635, 1310724, 20, 327636, 1310724, 20, 327637, 1310724, 20, 327638, 1310724, 20, 327630, 1245188, 20, 393167, 1769476, 20, 393168, 1769476, 20, 393169, 1769476, 20, 393170, 1769476, 20, 393171, 1769476, 20, 393172, 1769476, 20, 393173, 1769476, 20, 393174, 1769476, 20, 458710, 1769476, 20, 524246, 1769476, 20, 524245, 1769476, 20, 458709, 1769476, 20, 458708, 1769476, 20, 458707, 1769476, 20, 458706, 1769476, 20, 458705, 1769476, 20, 458704, 1769476, 20, 458703, 1769476, 20, 524240, 1769476, 20, 524241, 1769476, 20, 524242, 1769476, 20, 524243, 1769476, 20, 524244, 1769476, 20, 524239, 1769476, 20, 393166, 1703940, 20, 458702, 1703940, 20, 524238, 1703940, 20, 393175, 1835012, 20, 458711, 1835012, 20, 524247, 1835012, 20, 524304, 1376260, 20, 327639, 1376260, 20, 262196, 1245188, 20, 262209, 1376260, 20)

[node name="NavigationRegion2D" type="NavigationRegion2D" parent="."]
navigation_polygon = SubResource("NavigationPolygon_7fm1p")

[node name="Player" parent="." instance=ExtResource("3_b7610")]
position = Vector2(948, 50)
health_component = SubResource("Resource_sur25")
mana_component = SubResource("Resource_2bgqq")

[node name="IntroCastleLoreManager" parent="." instance=ExtResource("6_bsn1n")]

[node name="GuardCaptainNPC" parent="." node_paths=PackedStringArray("_animated_sprite") instance=ExtResource("7_ysuuh")]
position = Vector2(943, -2)
_animated_sprite = NodePath("WizardNPCSprite")
_dialog = SubResource("Resource_lusp1")

[node name="WizardNPCSprite" parent="GuardCaptainNPC" instance=ExtResource("9_e1vf3")]
frame_progress = 0.14814

[node name="EmmyNPC" parent="." node_paths=PackedStringArray("_animated_sprite") instance=ExtResource("7_ysuuh")]
position = Vector2(-735, 53)
_animated_sprite = NodePath("EmmyNPCSprite")

[node name="EmmyNPCSprite" parent="EmmyNPC" instance=ExtResource("12_esega")]

[node name="QueenNPC" parent="." node_paths=PackedStringArray("_animated_sprite") instance=ExtResource("7_ysuuh")]
position = Vector2(-771, 15)
_animated_sprite = NodePath("QueenCroixNPCSprite")

[node name="QueenCroixNPCSprite" parent="QueenNPC" instance=ExtResource("12_p3al2")]

[node name="EmmyCastleRoomLoreManager" parent="." instance=ExtResource("13_syyx6")]
position = Vector2(-667, 30)

[node name="MainHallTeleporter" parent="." instance=ExtResource("9_pdddj")]
position = Vector2(888, -5)

[node name="TeleporterDestination" parent="MainHallTeleporter" instance=ExtResource("13_pcxws")]
position = Vector2(-646, 121)

[node name="EmmyRoomTeleporter" parent="." instance=ExtResource("9_pdddj")]
position = Vector2(-72, 92)

[node name="TeleporterDestination" parent="EmmyRoomTeleporter" instance=ExtResource("13_pcxws")]
position = Vector2(-596, -61)
