[gd_scene load_steps=18 format=3 uid="uid://f13twvdpqwmx"]

[ext_resource type="PackedScene" uid="uid://ddqssg6qko7t7" path="res://player/player.tscn" id="2_r7kka"]
[ext_resource type="Script" path="res://util/components/health/health_component.gd" id="3_68nan"]
[ext_resource type="Script" path="res://util/components/mana/mana_component.gd" id="4_ywk14"]
[ext_resource type="TileSet" uid="uid://8161klnmo4uv" path="res://tilesets/dark_dimension_tileset/dark_dimension_modified_tileset.tres" id="5_qvdhi"]
[ext_resource type="PackedScene" uid="uid://cyrdo4s5yatf8" path="res://npcs/dialog_npc/dialog_npc.tscn" id="6_pame3"]
[ext_resource type="PackedScene" uid="uid://cst0mrjfn4dew" path="res://npcs/emmy/emmy_npc_sprite.tscn" id="7_fv5s8"]
[ext_resource type="Script" path="res://ui/dialog/dialog_resource.gd" id="7_uvta4"]
[ext_resource type="PackedScene" uid="uid://bitufy53rv88t" path="res://npcs/wizard/wizard_npc_sprite.tscn" id="9_543y2"]
[ext_resource type="PackedScene" uid="uid://d4etjbd61bgq7" path="res://maps/intro_area_outside_castle/town_outside_castle/lore/town_outside_castle_lore_manager.tscn" id="9_cr7th"]

[sub_resource type="Resource" id="Resource_dxust"]
script = ExtResource("7_uvta4")
author = "???"
dialog = Array[String](["...", "I'm DEFINITELY not Emmy. Never heard of her.", "...", "(You see through Emmy's diguise and tell her what happened.)", "Wow that's unfortunate. Maybe we can work together.", "You see, the Queen framed ME for stealing the Forest Spirits, the nerve of some people!", "Come with me to my secret hideout. The entrance is right behind me."])

[sub_resource type="Resource" id="Resource_espya"]
script = ExtResource("3_68nan")
_health = 8

[sub_resource type="Resource" id="Resource_oq4mf"]
script = ExtResource("4_ywk14")
_mana_amount = 4

[sub_resource type="Resource" id="Resource_6bcyw"]
script = ExtResource("7_uvta4")
author = "Random Guy"
dialog = Array[String](["I'm so mad. We just elected her to be our leader... AND SHE DOES THIS?"])

[sub_resource type="Resource" id="Resource_06esn"]
script = ExtResource("7_uvta4")
author = "Random Lady"
dialog = Array[String](["If the monarchy was still around, this wouldn't have happened."])

[sub_resource type="Resource" id="Resource_sqqc4"]
script = ExtResource("7_uvta4")
author = "Random Guy"
dialog = Array[String](["I'm so mad.... I can't believe Emmy did this...", "IF I EVER SEE HER AGAIN... I'M GOING TO...", "Politely tell her how disappointed I am in her.", "I didn't even vote for her."])

[sub_resource type="Resource" id="Resource_g0fuk"]
script = ExtResource("7_uvta4")
author = "Quiet Kid"
dialog = Array[String](["I don't understand what's going on.", "But everyone around me is mad, so I guess I'll be too!", "Is this what politics is like?"])

[sub_resource type="Resource" id="Resource_kuj6q"]
script = ExtResource("7_uvta4")
author = "Old Man"
dialog = Array[String](["Back in my day things were simpler.", "The king blew up villages for fun. This scheme is too elaborate for me.", "If Emmy truly wants to be evil, she should just blow up the castle and this village.", "Uh, I mean... I strongly condemn Emmy's actions. I'm definitely VERY mad at her."])

[node name="TownOutsideCastle" type="Node2D"]
y_sort_enabled = true

[node name="TileMap" type="TileMap" parent="."]
tile_set = ExtResource("5_qvdhi")
format = 2
layer_0/name = "Ground"
layer_0/z_index = -1
layer_0/tile_data = PackedInt32Array(131071, 327684, 10, 65536, 327684, 10, 65537, 327684, 10, 1, 327684, 10, 0, 327684, 10, 65535, 327684, 10, 65534, 327684, 10, 131070, 327684, 10, 131069, 327684, 10, 65533, 327684, 10, -3, 327684, 10, -65539, 327684, 10, -131075, 327684, 10, -196611, 327684, 10, -262147, 327684, 10, -262146, 327684, 10, -262145, 327684, 10, -327681, 327684, 10, -393216, 327684, 10, -393215, 327684, 10, -393214, 327684, 10, -327678, 327684, 10, -262142, 327684, 10, -196606, 327684, 10, -196607, 327684, 10, -131071, 327684, 10, -65535, 327684, 10, -65536, 327684, 10, -131072, 327684, 10, -65537, 327684, 10, -131073, 327684, 10, -2, 327684, 10, -65538, 327684, 10, -196609, 327684, 10, -327680, 327684, 10, -327679, 327684, 10, -262143, 327684, 10, -196608, 327684, 10, -196610, 327684, 10, -262144, 327684, 10, -131074, 327684, 10, -131076, 327684, 10, -327682, 327684, 10, -327683, 327684, 10, -327684, 327684, 10, -327685, 327684, 10, -262149, 327684, 10, -196613, 327684, 10, -65540, 327684, 10, -65541, 327684, 10, -5, 327684, 10, 65531, 327684, 10, 65532, 327684, 10, -4, 327684, 10, 131067, 327684, 10, 131068, 327684, 10, -1, 327684, 10, -131077, 327684, 10, -262148, 327684, 10, -196612, 327684, 10, -131070, 327684, 10, -65534, 327684, 10, 2, 327684, 10, 65538, 327684, 10, 65539, 327684, 10, 3, 327684, 10, -65533, 327684, 10, -131069, 327684, 10, -196605, 327684, 10, -327677, 327684, 10, -393213, 327684, 10, -262141, 327684, 10, -393212, 327684, 10, -327676, 327684, 10, -262140, 327684, 10, -196604, 327684, 10, -131068, 327684, 10, -65532, 327684, 10, 4, 327684, 10, 65540, 327684, 10, 131066, 327684, 10, 65530, 327684, 10, -6, 327684, 10, -65542, 327684, 10, -131078, 327684, 10, -196614, 327684, 10, -262150, 327684, 10, -327686, 327684, 10, -393222, 327684, 10, -393221, 327684, 10, -393220, 327684, 10, -393219, 327684, 10, -393218, 327684, 10, -393217, 327684, 10, -458752, 327684, 10, -458751, 327684, 10, -524287, 327684, 10, -524286, 327684, 10, -524285, 327684, 10, -458749, 327684, 10, -458750, 327684, 10, -458748, 327684, 10, -524284, 327684, 10, -524288, 327684, 10, -458753, 327684, 10, -458754, 327684, 10, -458755, 327684, 10, -458756, 327684, 10, -458757, 327684, 10, -458758, 327684, 10, -524283, 327684, 10, -458747, 327684, 10, -393211, 327684, 10, -327675, 327684, 10, -262139, 327684, 10, -196603, 327684, 10, -131067, 327684, 10, 5, 327684, 10, 65541, 327684, 10, -65531, 327684, 10, 65529, 327684, 10, 131065, 327684, 10, -7, 327684, 10, -65543, 327684, 10, -131079, 327684, 10, -196615, 327684, 10, -262151, 327684, 10, -327687, 327684, 10, -393223, 327684, 10, 65542, 327684, 10, 6, 327684, 10, -65530, 327684, 10, -131066, 327684, 10, -196602, 327684, 10, -262138, 327684, 10, -327674, 327684, 10, -393210, 327684, 10, -458746, 327684, 10, -524282, 327684, 10, -458759, 327684, 10, -524295, 327684, 10, -524294, 327684, 10, -524293, 327684, 10, -524292, 327684, 10, -524291, 327684, 10, -524290, 327684, 10, -524289, 327684, 10, -589824, 327684, 10, -589823, 327684, 10, -589822, 327684, 10, -589821, 327684, 10, -589820, 327684, 10, -589819, 327684, 10, -589818, 327684, 10, -655354, 327684, 10, -655355, 327684, 10, -655356, 327684, 10, -655357, 327684, 10, -655358, 327684, 10, -655359, 327684, 10, -655360, 327684, 10, -589825, 327684, 10, -589826, 327684, 10, -589827, 327684, 10, -589828, 327684, 10, -589829, 327684, 10, -589830, 327684, 10, -589831, 327684, 10, 131064, 327684, 10, 65528, 327684, 10, -8, 327684, 10, -65544, 327684, 10, -131080, 327684, 10, -196616, 327684, 10, -262152, 327684, 10, -393224, 327684, 10, -458760, 327684, 10, -524296, 327684, 10, -589832, 327684, 10, -327688, 327684, 10, -655353, 327684, 10, -589817, 327684, 10, -524281, 327684, 10, -458745, 327684, 10, -393209, 327684, 10, -327673, 327684, 10, -262137, 327684, 10, -196601, 327684, 10, -131065, 327684, 10, 7, 327684, 10, 65543, 327684, 10, -65529, 327684, 10, 131063, 327684, 10, 65527, 327684, 10, -9, 327684, 10, -65545, 327684, 10, -131081, 327684, 10, -196617, 327684, 10, -262153, 327684, 10, -327689, 327684, 10, -393225, 327684, 10, -458761, 327684, 10, 65544, 327684, 10, 8, 327684, 10, -65528, 327684, 10, -131064, 327684, 10, -196600, 327684, 10, -262136, 327684, 10, -327672, 327684, 10, -393208, 327684, 10, -458744, 327684, 10, -524280, 327684, 10, -589816, 327684, 10, -524297, 327684, 10, -589833, 327684, 10, -655352, 327684, 10, -655369, 524292, 10, -655368, 327684, 10, -655367, 327684, 10, -655366, 327684, 10, -655365, 327684, 10, -655364, 327684, 10, -655363, 327684, 10, -655362, 327684, 10, -655361, 327684, 10, -720896, 327684, 10, -720895, 327684, 10, -720894, 327684, 10, -720893, 327684, 10, -720892, 327684, 10, -720891, 327684, 10, -720890, 327684, 10, -720889, 327684, 10, -720888, 327684, 10)
layer_1/name = "Backwall"
layer_1/enabled = true
layer_1/modulate = Color(1, 1, 1, 1)
layer_1/y_sort_enabled = false
layer_1/y_sort_origin = 0
layer_1/z_index = -1
layer_1/tile_data = PackedInt32Array(-720905, 720900, 5, -720904, 720900, 5, -786439, 720900, 5, -786438, 720900, 5, -786441, 720900, 5, -786440, 720900, 5, -851977, 720900, 5, -851976, 720900, 5, -851975, 720900, 5, -851974, 720900, 5, -851973, 720900, 5, -851972, 720900, 5, -851971, 720900, 5, -851970, 720900, 5, -851969, 720900, 5, -917504, 720900, 5, -917503, 720900, 5, -917502, 720900, 5, -917501, 720900, 5, -917500, 720900, 5, -917499, 720900, 5, -917498, 720900, 5, -917497, 720900, 5, -917496, 720900, 5, -786437, 720900, 5, -786436, 720900, 5, -786435, 720900, 5, -786434, 720900, 5, -786433, 720900, 5, -851968, 720900, 5, -851967, 720900, 5, -851966, 720900, 5, -851965, 720900, 5, -851964, 655364, 1, -851963, 720900, 1, -851962, 786436, 1, -851961, 720900, 5, -851960, 720900, 5, -720900, 720900, 5, -720899, 720900, 5, -720898, 720900, 5, -720897, 720900, 5, -786432, 720900, 5, -786431, 720900, 5, -786430, 720900, 5, -786429, 720900, 5, -786428, 655364, 3, -786427, 720900, 3, -786426, 786436, 3, -786425, 720900, 5, -786424, 720900, 5, -720903, 720900, 5, -720902, 720900, 5, -720901, 720900, 5, -917513, 1310724, 18, -917512, 1310724, 18, -917511, 1310724, 18, -917510, 1310724, 18, -917509, 1310724, 18, -917508, 1310724, 18, -917507, 1310724, 18, -917506, 1310724, 18, -917505, 1310724, 18, -983040, 1310724, 18, -983039, 1310724, 18, -983038, 1310724, 18, -983037, 1310724, 18, -983036, 1310724, 18, -983035, 1310724, 18, -983034, 1310724, 18, -983033, 1310724, 18, -983032, 1310724, 18, -917514, 1245188, 18, -983031, 1376260, 18, -851978, 1245188, 19, -786442, 1245188, 19, -720906, 1245188, 19, -655370, 1245188, 19, -589834, 1245188, 19, -524298, 1245188, 19, -458762, 1245188, 19, -393226, 1245188, 19, -327690, 1245188, 19, -262154, 1245188, 19, -196618, 1245188, 19, -131082, 1245188, 19, -65546, 1245188, 19, -10, 1245188, 19, 65526, 1245188, 19, 9, 1376260, 19, -65527, 1376260, 19, -131063, 1376260, 19, -196599, 1376260, 19, -262135, 1376260, 19, -327671, 1376260, 19, -393207, 1376260, 19, -458743, 1376260, 19, -524279, 1376260, 19, -589815, 1376260, 19, -655351, 1376260, 19, -720887, 1376260, 19, -786423, 1376260, 19, -851959, 1376260, 19, -917495, 1376260, 19, 131063, 1310724, 18, 131064, 1310724, 18, 131065, 1310724, 18, 131066, 1310724, 18, 131067, 1310724, 18, 131068, 1310724, 18, 131069, 1310724, 18, 131070, 1310724, 18, 131071, 1310724, 18, 65536, 1310724, 18, 65537, 1310724, 18, 65538, 1310724, 18, 65539, 1310724, 18, 65540, 1310724, 18, 65541, 1310724, 18, 65542, 1310724, 18, 65543, 1310724, 18, 65544, 1310724, 18, 131062, 1245188, 20, 65545, 1376260, 20, 196599, 720900, 5, 262135, 720900, 5, 327671, 720900, 5, 196600, 720900, 5, 196601, 720900, 5, 196602, 720900, 5, 196603, 720900, 5, 196604, 720900, 5, 196605, 720900, 5, 196606, 720900, 5, 196607, 720900, 5, 131072, 720900, 5, 131073, 720900, 5, 131074, 720900, 5, 131075, 720900, 5, 131076, 720900, 5, 131077, 720900, 5, 131078, 720900, 5, 262136, 720900, 5, 262137, 720900, 5, 262138, 720900, 5, 262139, 720900, 5, 262140, 720900, 5, 262141, 720900, 5, 262142, 720900, 5, 262143, 720900, 5, 196608, 720900, 5, 196609, 720900, 5, 196610, 720900, 5, 196611, 720900, 5, 196612, 720900, 5, 196613, 720900, 5, 196614, 720900, 5, 327672, 720900, 5, 327673, 720900, 5, 327674, 720900, 5, 327675, 720900, 5, 327676, 720900, 5, 327677, 720900, 5, 327678, 720900, 5, 327679, 720900, 5, 262144, 720900, 5, 262145, 720900, 5, 262146, 720900, 5, 262147, 720900, 5, 262148, 720900, 5, 262149, 720900, 5, 262150, 720900, 5, 131079, 720900, 5, 131080, 720900, 5, 196616, 720900, 5, 262152, 720900, 5, 262151, 720900, 5, 196615, 720900, 5, 196598, 1703940, 20, 262134, 1703940, 20, 327670, 1703940, 20, 131081, 1835012, 20, 196617, 1835012, 20, 262153, 1835012, 20, -393223, 655364, 3, -327687, 655364, 4, -262151, 655364, 5, -196615, 655364, 6, -393222, 720900, 3, -327686, 720900, 4, -262150, 1048580, 2, -196614, 720900, 6, -393221, 786436, 3, -327685, 786436, 4, -262149, 655364, 1, -196613, 655364, 3, -458759, 655364, 1, -458758, 720900, 1, -458757, 786436, 1, -262139, 655364, 1, -196603, 655364, 3, -131067, 655364, 4, -65531, 655364, 5, 5, 655364, 6, -262138, 720900, 1, -196602, 720900, 3, -131066, 720900, 4, -65530, 1048580, 1, 6, 720900, 6, -262137, 786436, 1, -196601, 786436, 3, -131065, 786436, 4, -65529, 786436, 5, 7, 786436, 6, -720892, 655364, 4, -655356, 655364, 5, -589820, 655364, 6, -720891, 720900, 4, -655355, 917508, 3, -589819, 720900, 6, -720890, 786436, 4, -655354, 786436, 5, -589818, 786436, 6, -131077, 655364, 4, -65541, 655364, 5, -5, 655364, 6, -196612, 720900, 3, -131076, 720900, 4, -65540, 720900, 5, -4, 720900, 6, -196611, 786436, 3, -131075, 786436, 4, -65539, 786436, 5, -3, 786436, 6, -262148, 720900, 1, -262147, 786436, 1, -524289, 655364, 3, -458753, 655364, 4, -393217, 655364, 5, -327681, 655364, 6, -589824, 720900, 3, -524288, 720900, 4, -458752, 1114116, 1, -393216, 720900, 6, -589823, 786436, 3, -524287, 786436, 4, -458751, 786436, 5, -393215, 786436, 6, -589825, 655364, 1, -655360, 720900, 1, -655359, 786436, 1)
layer_2/name = "FrontWall"
layer_2/enabled = true
layer_2/modulate = Color(1, 1, 1, 1)
layer_2/y_sort_enabled = false
layer_2/y_sort_origin = 0
layer_2/z_index = -1
layer_2/tile_data = PackedInt32Array()

[node name="EmmyDisguisedDialogNPC" parent="." node_paths=PackedStringArray("_animated_sprite") instance=ExtResource("6_pame3")]
position = Vector2(-118, -156)
_animated_sprite = NodePath("PlaceholderEmmyNPCSprite")
_dialog = SubResource("Resource_dxust")

[node name="PlaceholderEmmyNPCSprite" parent="EmmyDisguisedDialogNPC" instance=ExtResource("7_fv5s8")]

[node name="Player" parent="." instance=ExtResource("2_r7kka")]
position = Vector2(1, 5)
health_component = SubResource("Resource_espya")
mana_component = SubResource("Resource_oq4mf")

[node name="TownOutsideCastleLoreManager" parent="." instance=ExtResource("9_cr7th")]

[node name="DialogNPC" parent="." node_paths=PackedStringArray("_animated_sprite") instance=ExtResource("6_pame3")]
position = Vector2(-18, -44)
_animated_sprite = NodePath("PlaceholderNPCSprite")
_dialog = SubResource("Resource_6bcyw")

[node name="PlaceholderNPCSprite" parent="DialogNPC" instance=ExtResource("9_543y2")]

[node name="DialogNPC2" parent="." node_paths=PackedStringArray("_animated_sprite") instance=ExtResource("6_pame3")]
position = Vector2(52, -49)
_animated_sprite = NodePath("PlaceholderNPCSprite")
_dialog = SubResource("Resource_06esn")

[node name="PlaceholderNPCSprite" parent="DialogNPC2" instance=ExtResource("9_543y2")]
flip_h = true

[node name="DialogNPC3" parent="." node_paths=PackedStringArray("_animated_sprite") instance=ExtResource("6_pame3")]
position = Vector2(-46, -106)
_animated_sprite = NodePath("PlaceholderNPCSprite")
_dialog = SubResource("Resource_sqqc4")

[node name="PlaceholderNPCSprite" parent="DialogNPC3" instance=ExtResource("9_543y2")]

[node name="DialogNPC4" parent="." node_paths=PackedStringArray("_animated_sprite") instance=ExtResource("6_pame3")]
position = Vector2(132, -147)
_animated_sprite = NodePath("PlaceholderNPCSprite")
_dialog = SubResource("Resource_g0fuk")

[node name="PlaceholderNPCSprite" parent="DialogNPC4" instance=ExtResource("9_543y2")]

[node name="DialogNPC5" parent="." node_paths=PackedStringArray("_animated_sprite") instance=ExtResource("6_pame3")]
position = Vector2(83, -95)
_animated_sprite = NodePath("PlaceholderNPCSprite")
_dialog = SubResource("Resource_kuj6q")

[node name="PlaceholderNPCSprite" parent="DialogNPC5" instance=ExtResource("9_543y2")]
flip_h = true
